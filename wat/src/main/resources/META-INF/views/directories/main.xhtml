<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/templates/mainLayout.xhtml">
	    <ui:define name="moduleContent">
	        <!--TODO : parameters columns on userProfile preference -->
	        <div id="directoryBg" class="backgroundDirectory">
		        <div align="center" style="vertical-align: middle" class="sectionMenu">
		            <ui:repeat value="#{directoryDashboardController.dashboardColumn}" var="column">
		                <br/><br/><br/>
		                <p:carousel id="basicCarousel" value="#{directoryDashboardController.getColumnWidgets(column)}" var="widget" itemStyle="width:350px" numVisible="3">
		                    <f:facet name="header">
		                        <h:outputText value="#{directoryDashboardController.getColumnName(column)}" />
		                    </f:facet>
		                    <h:outputLink value="#{directoryDashboardController.getWidgetAddress(widget)}">
		                        <h:panelGrid columns="2" cellpadding="1" style="width:80%; vertical-align: middle; text-align: center;">
		                            <i class="#{directoryDashboardController.getWidgetIcon(widget)}"/>
		                            <h:panelGroup>
		                                <h:outputText value="#{directoryDashboardController.getWidgetValue(widget)}" style="vertical-align: middle; font-weight: bold"/><br/>
		                                <h:outputText value="#{directoryDashboardController.getWidgetDescription(widget)}" style="vertical-align: middle"/>
		                            </h:panelGroup>
		                        </h:panelGrid>
		                    </h:outputLink>
		                </p:carousel>
		            </ui:repeat>
				</div>
                <br/><br/>
            </div><!-- end .backgroundDirectory -->
            <script type="application/javascript">
                var readyStateCheckIntervalDir = setInterval(function(){
                    if (document.readyState === "complete") {
                        clearInterval(readyStateCheckIntervalDir);
                        var bg = $("#directoryBg").css("background");
                        if (bg.indexOf("bg-ariane-directory.jpg") > -1)
                            $("#directoryBg").css({height: $(document).height() - 42});
                        else
                            $("#directoryBg").css({height: $(document).height() - 48});
                    }
                }, 100);

                window.onresize = function(event) {
                    var bg = $("#directoryBg").css("background");
                    if (bg.indexOf("bg-ariane-directory.jpg") > -1)
                        $("#directoryBg").css({height: $(document).height() - 42});
                    else
                        $("#directoryBg").css({height: $(document).height() - 48});
                };
            </script>
	    </ui:define>
</ui:composition>
</html>